<?php

function tppsC_menu() {
  $items = array();
  
  $items['admin/config/content/tppsC'] = array(
    'title' => 'tppsC',
    'description' => 'Configuration for the tppsC module',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('tppsC_form'),
    'access arguments' => array('access administration pages'),
    'type' => MENU_CALLBACK,
  );

  $items['tppsC'] = array (
    'title' => 'Internal tppsC Pipeline',
    'description' => 'aka lets get tppsC',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('tppsC_form'),
    'access callback' => TRUE
  );
  
  return $items;
}

function tppsC_form($form, &$form_state) { 

  $form['DOI'] = array(
    '#type' => 'textfield',
    '#title' => t('DOI:'),
    '#maxlength' => 100,
    '#required' => TRUE,
  );

  $species_dropdown_option = array(
    '1' => '1', '2' => '2', '3' => '3', '4' => '4', '5' => '5', '6' => '6', '7' => '7', '8' => '8', '9' => '9', '10' => '10', '11' => '11', '12' => '12', '13' => '13', '14' => '14', '15' => '15', '16' => '16', '17' => '17', '18' => '18', '19' => '19', '20' => '20',
  );

  $form['species_dropdown'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'select',
    '#title' => t('How many species are there in the study?'),
    '#options' => $species_dropdown_option,
    '#required' => TRUE,
    '#suffix' => '</div>',
  );

  $form['species1'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 1:'),
    '#states' => array(
      'visible' => array(
        array(
          array('select[name="species_dropdown"]' => array('value' => '1')),   array('select[name="species_dropdown"]' => array('value' => '2')),   array('select[name="species_dropdown"]' => array('value' => '3')),   array('select[name="species_dropdown"]' => array('value' => '4')),   array('select[name="species_dropdown"]' => array('value' => '5')),
          array('select[name="species_dropdown"]' => array('value' => '6')),   array('select[name="species_dropdown"]' => array('value' => '7')),   array('select[name="species_dropdown"]' => array('value' => '8')),   array('select[name="species_dropdown"]' => array('value' => '9')),   array('select[name="species_dropdown"]' => array('value' => '10')),
          array('select[name="species_dropdown"]' => array('value' => '11')),   array('select[name="species_dropdown"]' => array('value' => '12')),   array('select[name="species_dropdown"]' => array('value' => '13')),   array('select[name="species_dropdown"]' => array('value' => '14')),   array('select[name="species_dropdown"]' => array('value' => '15')),
          array('select[name="species_dropdown"]' => array('value' => '16')),   array('select[name="species_dropdown"]' => array('value' => '17')),   array('select[name="species_dropdown"]' => array('value' => '18')),   array('select[name="species_dropdown"]' => array('value' => '19')),   array('select[name="species_dropdown"]' => array('value' => '20')),
        ),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species2'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 2:'),
    '#states' => array(
      'visible' => array(
        array(
          array('select[name="species_dropdown"]' => array('value' => '2')),   array('select[name="species_dropdown"]' => array('value' => '3')),   array('select[name="species_dropdown"]' => array('value' => '4')),   array('select[name="species_dropdown"]' => array('value' => '5')), array('select[name="species_dropdown"]' => array('value' => '6')),   array('select[name="species_dropdown"]' => array('value' => '7')),   array('select[name="species_dropdown"]' => array('value' => '8')),   array('select[name="species_dropdown"]' => array('value' => '9')),   array('select[name="species_dropdown"]' => array('value' => '10')), array('select[name="species_dropdown"]' => array('value' => '11')),   array('select[name="species_dropdown"]' => array('value' => '12')),   array('select[name="species_dropdown"]' => array('value' => '13')),   array('select[name="species_dropdown"]' => array('value' => '14')),   array('select[name="species_dropdown"]' => array('value' => '15')), array('select[name="species_dropdown"]' => array('value' => '16')),   array('select[name="species_dropdown"]' => array('value' => '17')),   array('select[name="species_dropdown"]' => array('value' => '18')),   array('select[name="species_dropdown"]' => array('value' => '19')),   array('select[name="species_dropdown"]' => array('value' => '20')),
        ),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species3'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 3:'),
    '#states' => array(
      'visible' => array(
        array(
          array('select[name="species_dropdown"]' => array('value' => '3')),   array('select[name="species_dropdown"]' => array('value' => '4')),   array('select[name="species_dropdown"]' => array('value' => '5')),
          array('select[name="species_dropdown"]' => array('value' => '6')),   array('select[name="species_dropdown"]' => array('value' => '7')),   array('select[name="species_dropdown"]' => array('value' => '8')),   array('select[name="species_dropdown"]' => array('value' => '9')),   array('select[name="species_dropdown"]' => array('value' => '10')),
          array('select[name="species_dropdown"]' => array('value' => '11')),   array('select[name="species_dropdown"]' => array('value' => '12')),   array('select[name="species_dropdown"]' => array('value' => '13')),   array('select[name="species_dropdown"]' => array('value' => '14')),   array('select[name="species_dropdown"]' => array('value' => '15')),
          array('select[name="species_dropdown"]' => array('value' => '16')),   array('select[name="species_dropdown"]' => array('value' => '17')),   array('select[name="species_dropdown"]' => array('value' => '18')),   array('select[name="species_dropdown"]' => array('value' => '19')),   array('select[name="species_dropdown"]' => array('value' => '20')),
        ),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species4'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 4:'),
    '#states' => array(
      'visible' => array(
        array(
          array('select[name="species_dropdown"]' => array('value' => '4')),   array('select[name="species_dropdown"]' => array('value' => '5')),
          array('select[name="species_dropdown"]' => array('value' => '6')),   array('select[name="species_dropdown"]' => array('value' => '7')),   array('select[name="species_dropdown"]' => array('value' => '8')),   array('select[name="species_dropdown"]' => array('value' => '9')),   array('select[name="species_dropdown"]' => array('value' => '10')),
          array('select[name="species_dropdown"]' => array('value' => '11')),   array('select[name="species_dropdown"]' => array('value' => '12')),   array('select[name="species_dropdown"]' => array('value' => '13')),   array('select[name="species_dropdown"]' => array('value' => '14')),   array('select[name="species_dropdown"]' => array('value' => '15')),
          array('select[name="species_dropdown"]' => array('value' => '16')),   array('select[name="species_dropdown"]' => array('value' => '17')),   array('select[name="species_dropdown"]' => array('value' => '18')),   array('select[name="species_dropdown"]' => array('value' => '19')),   array('select[name="species_dropdown"]' => array('value' => '20')),
        ),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species5'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 5:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '5')),   array('select[name="species_dropdown"]' => array('value' => '6')),   array('select[name="species_dropdown"]' => array('value' => '7')),   array('select[name="species_dropdown"]' => array('value' => '8')),   array('select[name="species_dropdown"]' => array('value' => '9')),   array('select[name="species_dropdown"]' => array('value' => '10')),
          array('select[name="species_dropdown"]' => array('value' => '11')),   array('select[name="species_dropdown"]' => array('value' => '12')),   array('select[name="species_dropdown"]' => array('value' => '13')),   array('select[name="species_dropdown"]' => array('value' => '14')),   array('select[name="species_dropdown"]' => array('value' => '15')),
          array('select[name="species_dropdown"]' => array('value' => '16')),   array('select[name="species_dropdown"]' => array('value' => '17')),   array('select[name="species_dropdown"]' => array('value' => '18')),   array('select[name="species_dropdown"]' => array('value' => '19')),   array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species6'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 6:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '6')),   array('select[name="species_dropdown"]' => array('value' => '7')),   array('select[name="species_dropdown"]' => array('value' => '8')),   array('select[name="species_dropdown"]' => array('value' => '9')),   array('select[name="species_dropdown"]' => array('value' => '10')),
          array('select[name="species_dropdown"]' => array('value' => '11')),   array('select[name="species_dropdown"]' => array('value' => '12')),   array('select[name="species_dropdown"]' => array('value' => '13')),   array('select[name="species_dropdown"]' => array('value' => '14')),   array('select[name="species_dropdown"]' => array('value' => '15')),
          array('select[name="species_dropdown"]' => array('value' => '16')),   array('select[name="species_dropdown"]' => array('value' => '17')),   array('select[name="species_dropdown"]' => array('value' => '18')),   array('select[name="species_dropdown"]' => array('value' => '19')),   array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species7'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 7:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '7')),   array('select[name="species_dropdown"]' => array('value' => '8')),   array('select[name="species_dropdown"]' => array('value' => '9')),   array('select[name="species_dropdown"]' => array('value' => '10')),
          array('select[name="species_dropdown"]' => array('value' => '11')),   array('select[name="species_dropdown"]' => array('value' => '12')),   array('select[name="species_dropdown"]' => array('value' => '13')),   array('select[name="species_dropdown"]' => array('value' => '14')),   array('select[name="species_dropdown"]' => array('value' => '15')),
          array('select[name="species_dropdown"]' => array('value' => '16')),   array('select[name="species_dropdown"]' => array('value' => '17')),   array('select[name="species_dropdown"]' => array('value' => '18')),   array('select[name="species_dropdown"]' => array('value' => '19')),   array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species8'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 8:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '8')),   array('select[name="species_dropdown"]' => array('value' => '9')),   array('select[name="species_dropdown"]' => array('value' => '10')),
          array('select[name="species_dropdown"]' => array('value' => '11')),   array('select[name="species_dropdown"]' => array('value' => '12')),   array('select[name="species_dropdown"]' => array('value' => '13')),   array('select[name="species_dropdown"]' => array('value' => '14')),   array('select[name="species_dropdown"]' => array('value' => '15')),
          array('select[name="species_dropdown"]' => array('value' => '16')),   array('select[name="species_dropdown"]' => array('value' => '17')),   array('select[name="species_dropdown"]' => array('value' => '18')),   array('select[name="species_dropdown"]' => array('value' => '19')),   array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species9'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 9:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '9')),   array('select[name="species_dropdown"]' => array('value' => '10')),
          array('select[name="species_dropdown"]' => array('value' => '11')),   array('select[name="species_dropdown"]' => array('value' => '12')),   array('select[name="species_dropdown"]' => array('value' => '13')),   array('select[name="species_dropdown"]' => array('value' => '14')),   array('select[name="species_dropdown"]' => array('value' => '15')),
          array('select[name="species_dropdown"]' => array('value' => '16')),   array('select[name="species_dropdown"]' => array('value' => '17')),   array('select[name="species_dropdown"]' => array('value' => '18')),   array('select[name="species_dropdown"]' => array('value' => '19')),   array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );


  $form['species11'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 11:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '11')),array('select[name="species_dropdown"]' => array('value' => '12')), array('select[name="species_dropdown"]' => array('value' => '13')), array('select[name="species_dropdown"]' => array('value' => '14')), array('select[name="species_dropdown"]' => array('value' => '15')), array('select[name="species_dropdown"]' => array('value' => '16')), array('select[name="species_dropdown"]' => array('value' => '17')), array('select[name="species_dropdown"]' => array('value' => '18')), array('select[name="species_dropdown"]' => array('value' => '19')), array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species12'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 12:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '12')), array('select[name="species_dropdown"]' => array('value' => '13')), array('select[name="species_dropdown"]' => array('value' => '14')), array('select[name="species_dropdown"]' => array('value' => '15')), array('select[name="species_dropdown"]' => array('value' => '16')), array('select[name="species_dropdown"]' => array('value' => '17')), array('select[name="species_dropdown"]' => array('value' => '18')), array('select[name="species_dropdown"]' => array('value' => '19')), array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species13'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 13:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '13')), array('select[name="species_dropdown"]' => array('value' => '14')), array('select[name="species_dropdown"]' => array('value' => '15')), array('select[name="species_dropdown"]' => array('value' => '16')), array('select[name="species_dropdown"]' => array('value' => '17')), array('select[name="species_dropdown"]' => array('value' => '18')), array('select[name="species_dropdown"]' => array('value' => '19')), array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species14'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 14:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '14')), array('select[name="species_dropdown"]' => array('value' => '15')), array('select[name="species_dropdown"]' => array('value' => '16')), array('select[name="species_dropdown"]' => array('value' => '17')), array('select[name="species_dropdown"]' => array('value' => '18')), array('select[name="species_dropdown"]' => array('value' => '19')), array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species15'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 15:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '15')), array('select[name="species_dropdown"]' => array('value' => '16')), array('select[name="species_dropdown"]' => array('value' => '17')), array('select[name="species_dropdown"]' => array('value' => '18')), array('select[name="species_dropdown"]' => array('value' => '19')), array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species16'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 16:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '16')), array('select[name="species_dropdown"]' => array('value' => '17')), array('select[name="species_dropdown"]' => array('value' => '18')), array('select[name="species_dropdown"]' => array('value' => '19')), array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species17'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 17:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '17')), array('select[name="species_dropdown"]' => array('value' => '18')), array('select[name="species_dropdown"]' => array('value' => '19')), array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species18'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 18:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '18')), array('select[name="species_dropdown"]' => array('value' => '19')), array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species19'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 19:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '19')), array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $form['species20'] = array(
    '#prefix' => '<div class="container-inline">',
    '#type' => 'textfield',
    '#title' => t('Species 20:'),
    '#states' => array(
      'visible' => array(
          array('select[name="species_dropdown"]' => array('value' => '20')),
      ),
    ),
    '#suffix' => '</div>',
  );

  $study_type_options = array(
    'G' => 'Genotype',
    'P' => 'Phenotype',
    'E' => 'Environment',
    'GxP' => 'Genotype x Phenotype',
    'GxE' => 'Genotype x Environment',
    'PxE' => 'Phenotype x Environment',
    'GxPxE' => 'Genotype x Phenotype x Environment',
  );

  $form['study_type'] = array(
    '#type' => 'select',
    '#title' => t('Study Type:'),
    '#options' => $study_type_options,
    '#required' => TRUE,
  );

  $genotype_marker_types = array(
    'SNPs' => 'SNPs',
    'SSRs/cpSSRs' => 'SSRs/cpSSRs',
    'Other' => 'Other',
  );

  $form['genotype_marker_type'] = array(
    '#type' => 'checkboxes',
    '#title' => t('Genotype Marker Type:'),
    '#options' => $genotype_marker_types,
    '#states' => array(
      'visible' => array(
        array(
          array('select[name="study_type"]' => array('value' => 'G')), array('select[name="study_type"]' => array('value' => 'GxE')), array('select[name="study_type"]' => array('value' => 'GxP')), array('select[name="study_type"]' => array('value' => 'GxPxE')),
        )
      ),
    ),
  );

  $form['genotype_file_SNPs'] = array(
    '#type' => 'file',
    '#title' => t('SNPs File Upload'),
    '#description' => t('Please upload a .vcf file with the SNPs information.'),
    '#upload_validators' => array('file_validate_extensions' => array('vcf')),
    '#states' => array(
      'visible' => array(
        ':input[name="genotype_marker_type[SNPs]"]' => array('checked' => TRUE),
      ),
    ),
  );

  $form['genotype_file_SSRs'] = array(
    '#type' => 'file',
    '#title' => t('SSRs/cpSSRs File Upload'),
    '#description' => t('Please upload an excel file with the SSRs/cpSSRs information.'),
    '#states' => array(
      'visible' => array(
        ':input[name="genotype_marker_type[SSRs/cpSSRs]"]' => array('checked' => TRUE),
      ),
    ),
  );

  $form['genotype_file_SSRs_header_check'] = array(
    '#type' => 'checkbox',
    '#title' => t('My file does not have a header'),
    '#states' => array(
      'visible' => array(
        ':input[name="genotype_marker_type[SSRs/cpSSRs]"]' => array('checked' => TRUE),
      ),
    ),
  );

  $form['genotype_file_other'] = array(
    '#type' => 'file',
    '#title' => t('Other Genotype File Upload'),
    '#description' => t('Please upload an excel file with the Genotype information.'),
    '#states' => array(
      'visible' => array(
        ':input[name="genotype_marker_type[Other]"]' => array('checked' => TRUE),
      ),
    ),
  );

  $form['genotype_file_other_header_check'] = array(
    '#type' => 'checkbox',
    '#title' => t('My file does not have a header'),
    '#states' => array(
      'visible' => array(
        ':input[name="genotype_marker_type[Other]"]' => array('checked' => TRUE),
      ),
    ),
  );


  $form['phenotype_file_upload'] = array(
    '#type' => 'file',
    '#title' => t('Phenotype File Upload'),
    '#description' => t('Optional: Upload an excel file of phenotypic data,'),
    '#states' => array(
      'visible' => array(
        array(
          array('select[name="study_type"]' => array('value' => 'P')), array('select[name="study_type"]' => array('value' => 'PxE')), array('select[name="study_type"]' => array('value' => 'GxP')), array('select[name="study_type"]' => array('value' => 'GxPxE')),
        )
      ),
    ),
  );

  $form['phenotype_header_check'] = array(
    '#type' => 'checkbox',
    '#title' => t('My file does not have a header'),
    '#states' => array(
      'visible' => array(
        array(
          array('select[name="study_type"]' => array('value' => 'P')), array('select[name="study_type"]' => array('value' => 'PxE')), array('select[name="study_type"]' => array('value' => 'GxP')), array('select[name="study_type"]' => array('value' => 'GxPxE')),
        )
      ),
    ),
  );

  $form['environment_file_upload'] = array(
    '#type' => 'file',
    '#title' => t('Environment File Upload'),
    '#description' => t('Optional: Upload an excel file of enviornmental data.'),
    '#states' => array(
      'visible' => array(
        array(
          array('select[name="study_type"]' => array('value' => 'E')), array('select[name="study_type"]' => array('value' => 'PxE')), array('select[name="study_type"]' => array('value' => 'GxE')), array('select[name="study_type"]' => array('value' => 'GxPxE')),
        )
      ),
    ),
  );

  $form['enviornment_header_check'] = array(
    '#type' => 'checkbox',
    '#title' => t('My file does not have a header'),
    '#states' => array(
      'visible' => array(
        array(
          array('select[name="study_type"]' => array('value' => 'E')), array('select[name="study_type"]' => array('value' => 'PxE')), array('select[name="study_type"]' => array('value' => 'GxE')), array('select[name="study_type"]' => array('value' => 'GxPxE')),
        )
      ),
    ),
  );

  $study_design_options = array(
    'Natural Population' => 'Natural Population',
    'Growth Chamber' => 'Growth Chamber',
    'Greenhouse' => 'Greenhouse',
    'Common Garden' => 'Common Garden',
    'Plantation' => 'Plantation',
  );

  $form['study_design'] = array(
    '#type' => 'select',
    '#title' => t('Study Design:'),
    '#options' => $study_design_options,
    '#required' => TRUE,
  );

  $study_location_options = array(
    'WGS 84' => 'Latitude/Longitude (WGS 84)',
    'NAD 83' => 'Latitude/Longitude (NAD 83)',
    'ETRS 89' => 'Latitude/Longitude (ETRS 89)',
    'Custom Location' => 'Custom Location',
  );

  $form['study_location'] = array(
    '#type' => 'select',
    '#title' => t('Study Location:'),
    '#options' => $study_location_options,
    '#required' => TRUE,
  );

  $form['study_location_states_exact'] = array(
    '#type' => 'textfield',
    '#title' => t('Coordinates:'),
    '#states' => array(
      'visible' => array(
        array(
          array('select[name="study_location"]' => array('value' => 'WGS 84')), array('select[name="study_location"]' => array('value' => 'NAD 83')), array('select[name="study_location"]' => array('value' => 'ETRS 89')),
        )
      ),
    ),
    '#description' => t('Accepted Formats are Degrees Minutes Seconds, Degrees Decimal Minutes, and Decimal Degrees.'),
  );

  $form['study_location_states_custom'] = array(
    '#type' => 'textfield',
    '#title' => t('Custom Location:'),
    '#description' => t('Ex: Street Address, or other location formats.'),
    '#states' => array(
      'visible' => array(
        'select[name="study_location"]' => array('value' => 'Custom Location'),
      ),
    ),
  );

  $form['tree_location_data'] = array(
    '#type' => 'file',
    '#title' => t('Tree Accession File'),
    '#description' => t('Please provide a spreadsheet with columns for the Tree ID and the location of trees used in this study'),
  );


  $form['submit_button'] = array('#type' => 'submit', '#value' => t('Submit'));

  return $form;

}

function tppsC_form_validate($form, &$form_state) {
}

function tppsC_form_submit($form, &$form_state) {
  $DOI = $form_state['values']['DOI'];
  $species_dropdown = $form_state['values']['species_dropdown'];
  $studyType = $form_state['values']['study_type'];
  $studyDesign = $form_state['values']['study_design'];
  $studyLocation = $form_state['values']['study_location'];
  
  if ($studyLocation == 'WGS 84' or $studyLocation = 'NAD 83' or $studyLocation = 'ETRS 89') {
    $studyLocationCoord = $form_state['values']['study_location_states_exact'];
  }
  elseif ($studyLocation == 'Custom Location') {
    $studyLocationCoord = $form_state['values']['study_location_states_custom'];
  }

  $species1 = $form_state['values']['species1'];
  $species2 = $form_state['values']['species2'];
  $species3 = $form_state['values']['species3'];
  $species4 = $form_state['values']['species4'];
  $species5 = $form_state['values']['species5'];
  $species6 = $form_state['values']['species6'];
  $species7 = $form_state['values']['species7'];
  $species8 = $form_state['values']['species8'];
  $species9 = $form_state['values']['species9'];
  $species10 = $form_state['values']['species10'];
  $species11 = $form_state['values']['species11'];
  $species12 = $form_state['values']['species12'];
  $species13 = $form_state['values']['species13'];
  $species14 = $form_state['values']['species14'];
  $species15 = $form_state['values']['species15'];
  $species16 = $form_state['values']['species16'];
  $species17 = $form_state['values']['species17'];
  $species18 = $form_state['values']['species18'];
  $species19 = $form_state['values']['species19'];
  $species20 = $form_state['values']['species20'];
  
  $species = array(
    'Species 1' => $species1, 'Species 2' => $species2, 'Species 3' => $species3, 'Species 4' => $species4, 'Species 5' => $species5,  'Species 6' => $species6, 'Species 7' => $species7, 'Species 8' => $species8, 'Species 9' => $species9, 'Species 10' => $species10,  'Species 11' => $species11, 'Species 12' => $species12, 'Species 13' => $species13, 'Species 14' => $species14, 'Species 15' => $species15, 'Species 16' => $species16, 'Species 17' => $species17, 'Species 18' => $species18, 'Species 19' => $species19, 'Species 20' => $species20,
  );

  $data = array(
    'DOI' => $DOI,
    'species' => $species,
    'studyType' => $studyType,
    'studyDesign' => $studyDesign,
    'studyLocation' => $studyLocation,
    'studyLocationCoord' => $studyLocationCoord,
  );

  drupal_write_record('node', $data);
}

function tppsC_permission() {
  return array(
    'access tppsC content' => array(
      'title' => t('Access content for the tppsC module'),
     )
  );

}

function tppsC_help($path, $arg) {
  switch ($path) {
    case "admin/help#tppsC":
      return t("my custom internal tppsC module");
      break;
  }

}

